import{R as j,r as o,u as f,i as L,y as u,j as e,H as y,L as C,k as v}from"./index-CzkBdf-o.js";const E=({onLogin:n})=>{const[r,p]=o.useState({email:"",password:""}),[s,l]=o.useState(!1),c=f(),m=o.useMemo(()=>({height:"400px"}),[]),g=o.useMemo(()=>({marginTop:"10%",marginLeft:"auto",marginRight:"auto"}),[]),d=o.useCallback(i=>{const{name:t,value:a}=i.target;p(x=>({...x,[t]:a}))},[]),h=o.useCallback(async i=>{if(i.preventDefault(),!s){l(!0);try{const t=await L.post("/api/login",r,{timeout:5e3}),{role:a}=t.data;u.success("Login successful!",{position:"top-right",autoClose:2e3,onClose:()=>{a==="admin"&&(n(!0),c("/"))}})}catch(t){console.error("Login error:",t);let a="Login failed. Please check your credentials.";t.code==="ECONNABORTED"?a="Request timed out. Please try again.":t.response?.status===401?a="Invalid email or password.":t.response||(a="Network error. Please check your connection."),u.error(a,{position:"top-right",autoClose:3e3})}finally{l(!1)}}},[r,s,n,c]);return e.jsxs(e.Fragment,{children:[e.jsxs(y,{children:[e.jsx("title",{children:"Login - EXCERPT TECHNOLOGIES PRIVATE LIMITED"}),e.jsx("meta",{name:"description",content:"Login to your account at Excerpt Technologies Private Limited."})]}),e.jsx("div",{className:"wrapper login-1",style:m,children:e.jsxs("div",{className:"lcontainer",style:g,children:[e.jsx("div",{className:"col-left",children:e.jsxs("div",{className:"login-text",children:[e.jsx("h2",{children:"Welcome Back"}),e.jsxs("p",{children:["Create your account.",e.jsx("br",{})]}),e.jsx(C,{to:"/register",className:"btn",children:"Sign Up"})]})}),e.jsx("div",{className:"col-right",children:e.jsxs("div",{className:"login-form",children:[e.jsx("h2",{children:"Login"}),e.jsxs("form",{onSubmit:h,children:[e.jsx("p",{children:e.jsx("input",{type:"email",name:"email",placeholder:"Email",value:r.email,onChange:d,required:!0,disabled:s,autoComplete:"email"})}),e.jsx("p",{children:e.jsx("input",{type:"password",name:"password",placeholder:"Password",value:r.password,onChange:d,required:!0,disabled:s,autoComplete:"current-password"})}),e.jsx("p",{children:e.jsx("button",{type:"submit",disabled:s,style:{opacity:s?.7:1,cursor:s?"not-allowed":"pointer"},children:s?"Logging in...":"Login"})}),e.jsx("p",{})]}),e.jsx(v,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,limit:3})]})})]})})]})},w=j.memo(E);export{w as default};
